<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    html.lenis, html.lenis body {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto !important;
}

.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}

.lenis.lenis-stopped {
  overflow: hidden;
}

.lenis.lenis-smooth iframe {
  pointer-events: none;
}
#loading-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        #loading-screen video {
            width: 100%;
            height: auto;
        }
</style>
<body>
    </div>
    <div class="w-full bg-zinc-900">
        <div class="parent w-full h-[1400vh] relative ">
            <div class="w-full h-screen  sticky top-0 left-0 overflow-x-hidden">
                <canvas class="w-full h-screen" id="canvas"></canvas>
                <div class="absolute animate-1 z-[2] text-white bottom-10 w-1/2 left-10">
                    <h1 class="leading-20 font-[100] text-3xl ">&copy; 2024 DOEZ STD</h1>
                    <h1 class="text-3xl">SHAPING BRANDS -> CRAFTING MOTION </h1>
                </div>
                <div class="absolute animate-2 flex z-[2] text-white bottom-10 w-1/2 right-10 text-right opacity-0">
                    <h1 class="leading-20 font-[100] uppercase text-6xl ">Transforming Vision</h1>
                    <h1 class="text-xl w-1/2">Building identity and inspiring action. Sculating digital exposion
                        resonate </h1>
                </div>

                <div
                    class="absolute animate-3  z-[2] text-white top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center opacity-0">
                    <h1 class="leading-20 font-[100] uppercase text-6xl ">Elevating Aesthatics</h1>
                    <h1 class="text-xl ">Crafting solutions and exploring new horizon. Evolving narratives and elevating
                        aesthtics in every project</h1>
                </div>
                <div class="w-1/3 panel translate-x-full h-screen bg-white absolute right-0 top-0 z-[2] p-10">
                    <h3 class="panelelem text-xl font-[100]">© 2024 Doze.Std</h3>
                    <p class="panelelem mt-10 text-xl">
                        Sculpting Digital
                        Transforming visions into digital realities. Weaving stories that captivate and innovate.
                        Exploring new possibilities with a focus on narrative evolution. Crafting solutions that engage
                        and elevate.</p>
                    <button class="panelelem border-[1px] px-3 py-2 border-[#555] font-[100] mt-6">Get Reviews
                        →</button>
                    <div class="panelelem absolute bottom-10">
                        <h3 class="text-xl">Innovating Design</h3>
                        <p class="text-sm mt-3">Connecting ideas to foster creativity. Designing impactful experiences
                            that
                            resonate.
                            Feel free to mix and match these sections to suit your website's design needs!</p>
                        <button
                            class="bg-black text-white px-7 text-sm mt-4 py-4 font-[100] capitalize">experience</button>
                    </div>
                </div>
                <div
                    class="absolute animate-4  z-[2] text-white top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-6xl tracking-tighter opacity-0">
                    &copy;Panelism <span class="line w-10 h-1 bg-white inline-block"></span> 2048
                </div>
            </div>
        </div>
        <div class="w-full py-32 px-10 bg-white">
            <h1 class="text-8xl tracking-tighter">&reg; Our Recent Work</h1>
            <div class="w-1/2 headings p-3 mt-32 flex flex-col gap-10">
                <h3 class="text-7xl">Zonk Blerp</h3>
                <h3 class="text-7xl">Flibble Sprock</h3>
                <h3 class="text-7xl">Wibble Zurf</h3>
                <h3 class="text-7xl">Quarn Blap</h3>
                <h3 class="text-7xl">Snarp Woogle</h3>
                <h3 class="text-7xl">Frizzle Bump</h3>
                <h3 class="text-7xl">Plonk Zorp</h3>
                <h3 class="text-7xl">Slibber Klop</h3>
                <h3 class="text-7xl">Glonk Dribble</h3>
                <h3 class="text-7xl">Twizzle Blurb</h3>
                <h3 class="text-7xl">Skribble Zink</h3>
                <h3 class="text-7xl">Quibble Plop</h3>
                <h3 class="text-7xl">Blizzy Nerp</h3>
                <h3 class="text-7xl">Fuzzle Droop</h3>
                <h3 class="text-7xl">Krinkle Splap</h3>
            </div>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
<script src="https://unpkg.com/lenis@1.1.9/dist/lenis.min.js"></script> 
<script>
    document.addEventListener("DOMContentLoaded", function () {
    gsap.registerPlugin(ScrollTrigger);

    const canvas = document.querySelector("#canvas");
    const context = canvas.getContext('2d');
    const frames = {
        currentIndex: 0,
        maxIndex: 1345
    };
    let imagesLoaded = 0;
    let images = [];

    // Function to hide the video
    function preloadImages() {
        for (let i = 1; i <= frames.maxIndex; i++) {
            const imageUrl = `./frames/frame_${i.toString().padStart(4, "0")}.jpeg`;
            const img = new Image();
            img.src = imageUrl;

            img.onload = () => {
                imagesLoaded++;
                if (imagesLoaded === frames.maxIndex) {
                    // Hide the video once images are loaded
                    hideVideo();
                    loadImage(frames.currentIndex);
                    startAnimation(); // Call the function to start animation
                }
            };

            img.onerror = () => {
                console.error(`Failed to load image: ${imageUrl}`);
            };

            images.push(img);
        }
    }

    function loadImage(index) {
        if (index >= 0 && index <= frames.maxIndex) {
            const img = images[index];
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const scaleX = canvas.width / img.width;
            const scaleY = canvas.height / img.height;
            const scale = Math.max(scaleX, scaleY)

            const newWidth = img.width * scale;
            const newHeight = img.height * scale;

            const offsetX = (canvas.width - newWidth) / 2;
            const offsetY = (canvas.height - newHeight) / 2;

            context.imageSmoothingEnabled = true;
            context.imageSmoothingQuality = "high";
            context.clearRect(0, 0, canvas.width, canvas.height);
            context.drawImage(img, offsetX, offsetY, newWidth, newHeight);
            // frames.currentIndex = index;
            console.log(frames.currentIndex = index);
        }
    }

    function startAnimation() {
        var tl = gsap.timeline({
            scrollTrigger: {
                trigger: ".parent",
                start: "top top",
                end: "bottom bottom", // Use 'end' instead of 'bottom' for proper scrolling
                scrub: 2,
            }
        })
        function updateframe(index) {
            return {
                currentIndex: index,
                ease: "linear",
                onUpdate: function () {
                    loadImage(Math.floor(frames.currentIndex));
                }
            }
        }

        tl
            .to(frames, updateframe(100), "a")
            .to(".animate-1", { opacity: 0, ease: "linear" }, "a")
            .to(frames, updateframe(70), "second")
            .to(".animate-2", { opacity: 1, ease: "linear" }, "second")
            .to(frames, updateframe(240), "third")
            .to(".animate-2", { opacity: 1, ease: "linear" }, "third")
            .to(frames, updateframe(310), "fourth")
            .to(".animate-2", { opacity: 0, ease: "linear" }, "fourth")
            .to(frames, updateframe(380), "fifth")
            .to(".animate-3", { opacity: 1, ease: "linear" }, "fifth")
            .to(frames, updateframe(450), "sixth")
            .to(".animate-3", { opacity: 1, ease: "linear" }, "sixth")
            .to(frames, updateframe(520), "seventh")
            .to(".animate-3", { opacity: 0, ease: "linear" }, "seventh")
            .to(frames, updateframe(260), "eighth")
            .to(".panel", { x: "0%", ease: "expo" }, "eighth")
            .to(frames, updateframe(590), "ninth")
            .to(".panel", { x: "0%", ease: "expo" }, "ninth")
            .to(frames, updateframe(660), "tenth")
            .to(".panel", { opacity: 0, ease: "linear" }, "tenth")
            .to(frames, updateframe(730), "eleventh")
            .to("canvas", { scale: 0.5, ease: "linear" }, "eleventh")
            .to(frames, updateframe(800), "tweleth")
            .to(".animate-4", { opacity: 1, ease: "expo" }, "tweleth")
            .to(frames, updateframe(870), "tweleth")
            .to(".line", { width: 200, ease: "expo" }, "tweleth")
            .to(frames, updateframe(940), "therteenth")
            .to("canvas", { scale: 1, ease: "linear" }, "therteenth")
            .to(frames, updateframe(1010), "fourteen")
            .to(".animate-4", { scale: 2, ease: "circ" }, "fourteen")
            .to(frames, updateframe(1344), "fifteen")
            .to(".animate-4", { scale: 2, ease: "circ" }, "fifteen")

    }

    const lenis = new Lenis()
    
    function raf(time) {
  lenis.raf(time)
  requestAnimationFrame(raf)
}

requestAnimationFrame(raf)

    window.addEventListener("resize", function () {
        loadImage(Math.floor(frames.currentIndex))
    })

    preloadImages();

    document.querySelectorAll(".headings h3").forEach(function (e) {
        gsap.from(e, {
            scrollTrigger:{
                trigger: e,
                start: "top 90%",
                end:"bottom 20%",
                scrub:2,
                // markers:true,
            },
            opacity:0.3
        })
    })
});

</script>

</html>
